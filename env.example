# ==============================================================================
# COMPTALYZE - Configuration des variables d'environnement
# ==============================================================================
# 
# Ce fichier liste TOUTES les variables nécessaires pour faire tourner Comptalyze.
# Copiez ce fichier en ".env.local" pour le développement local.
#
# ⚠️ NE JAMAIS committer de vraies valeurs dans ce fichier !
#
# ==============================================================================

# ------------------------------------------------------------------------------
# SUPABASE (Base de données + Auth)
# ------------------------------------------------------------------------------
# URL de votre projet Supabase (trouvable dans Settings > API)
NEXT_PUBLIC_SUPABASE_URL=https://votre-projet.supabase.co

# Clé anonyme publique (safe pour le client)
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# ⚠️ Service Role Key - NE JAMAIS exposer côté client !
# Utilisée pour les webhooks, l'admin, et les opérations serveur
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# ------------------------------------------------------------------------------
# STRIPE (Paiements & Abonnements)
# ------------------------------------------------------------------------------
# Clés API Stripe (Dashboard > Developers > API keys)
# En dev, utilisez les clés de test (pk_test_xxx / sk_test_xxx)
STRIPE_SECRET_KEY=sk_test_51xxxxx
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_51xxxxx

# Secret de signature des webhooks (Dashboard > Developers > Webhooks)
# Permet de vérifier l'authenticité des événements Stripe
STRIPE_WEBHOOK_SECRET=whsec_xxxxx

# Price IDs - Créés dans Stripe Dashboard > Products
# Ces IDs lient les boutons de paiement aux produits Stripe
STRIPE_PRICE_PRO=price_xxxxx_pro_monthly
STRIPE_PRICE_PREMIUM=price_xxxxx_premium_monthly
STRIPE_PRICE_PRO_YEARLY=price_xxxxx_pro_yearly
STRIPE_PRICE_PREMIUM_YEARLY=price_xxxxx_premium_yearly

# Optionnel : Price IDs publics (pour référence frontend)
NEXT_PUBLIC_STRIPE_PRICE_PRO=price_xxxxx_pro_monthly
NEXT_PUBLIC_STRIPE_PRICE_PREMIUM=price_xxxxx_premium_monthly
NEXT_PUBLIC_STRIPE_PRICE_PRO_YEARLY=price_xxxxx_pro_yearly
NEXT_PUBLIC_STRIPE_PRICE_PREMIUM_YEARLY=price_xxxxx_premium_yearly

# ------------------------------------------------------------------------------
# OPENAI (IA - ComptaBot & Conseils)
# ------------------------------------------------------------------------------
# Clé API OpenAI (https://platform.openai.com/api-keys)
# Nécessaire pour les fonctionnalités IA Premium
OPENAI_API_KEY=sk-proj-xxxxx

# ------------------------------------------------------------------------------
# RESEND (Emails transactionnels)
# ------------------------------------------------------------------------------
# Clé API Resend (https://resend.com/api-keys)
# Pour l'envoi d'emails : bienvenue, rappels, récaps mensuels, etc.
RESEND_API_KEY=re_xxxxx

# Adresse email d'envoi (doit être vérifiée dans Resend)
COMPANY_FROM_EMAIL="Comptalyze <no-reply@comptalyze.com>"
# Adresse email spécifique pour la vérification (optionnel - fallback vers onboarding@resend.dev)
EMAIL_VERIFICATION_FROM="Comptalyze <onboarding@resend.dev>"

# ------------------------------------------------------------------------------
# RECAPTCHA (Protection anti-spam)
# ------------------------------------------------------------------------------
# Google reCAPTCHA v2 (https://www.google.com/recaptcha/admin)
NEXT_PUBLIC_RECAPTCHA_SITE_KEY=6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI
RECAPTCHA_SECRET_KEY=6LeIxAcTAAAAAGG-vFI1TnRWxMZNFuojJ4WifJWe

# ------------------------------------------------------------------------------
# APPLICATION
# ------------------------------------------------------------------------------
# URL de base de l'application (sans trailing slash)
# Dev : http://localhost:3000
# Prod : https://comptalyze.com
NEXT_PUBLIC_BASE_URL=http://localhost:3000

# Version de l'app (optionnel - pour le endpoint /api/health)
npm_package_version=0.1.0

# ------------------------------------------------------------------------------
# CRON & JOBS
# ------------------------------------------------------------------------------
# Secret pour sécuriser les appels CRON (générez un UUID aléatoire)
# Utilisé pour authentifier les tâches planifiées (Vercel Cron, etc.)
# ⚠️ REQUIS pour le cron de réconciliation des trials
CRON_SECRET=votre-secret-cron-unique-et-aleatoire

# ------------------------------------------------------------------------------
# ANALYTICS & TRACKING (FUNNEL GOOGLE ADS / META)
# ------------------------------------------------------------------------------
# Google Analytics 4
NEXT_PUBLIC_GA4_ID=G-XXXXXXXXXX
NEXT_PUBLIC_GA_MEASUREMENT_ID=G-XXXXXXXXXX

# Google Tag Manager (GTM)
NEXT_PUBLIC_GTM_ID=GTM-XXXXXXX

# Google Ads Conversion Tracking
# Conversion ID : 17719086824 (utiliser AW-17719086824)
# Conversion Label : fpC9CPjV_74bEOidj4FC
# Conversion Name : Achat_Comptalyze
NEXT_PUBLIC_GOOGLE_ADS_CONV_ID=AW-17719086824
NEXT_PUBLIC_GOOGLE_ADS_CONV_LABEL=fpC9CPjV_74bEOidj4FC

# Meta Pixel (Facebook)
NEXT_PUBLIC_META_PIXEL_ID=1234567890123456

# Umami Analytics (Alternative EU-friendly - Optionnel)
NEXT_PUBLIC_UMAMI_WEBSITE_ID=votre-website-id
NEXT_PUBLIC_UMAMI_SRC=https://cloud.umami.is/script.js
# Ou pour auto-hébergement : https://votre-instance-umami.com/script.js

# ------------------------------------------------------------------------------
# FACEBOOK / META (Pixel & Conversions API)
# ------------------------------------------------------------------------------
# Meta Pixel ID (trouvable dans Events Manager)
FACEBOOK_PIXEL_ID=2064326694403097

# Token d'accès pour l'API Conversions (Events Manager > Settings > Conversions API)
# Permet de suivre les événements côté serveur
FACEBOOK_CONVERSION_API_TOKEN=EAAVTEHn72xQBPzGef0RsIoLbFjizAJskxPXUSx3LmnFq3tkZCK4qqdmb42XodoJ1SxB8xmI0fWL9eDrFyfaOZCvJCmwyYspKtyk41NQ7QZA9haLlX2fBCbbNvR7skCPkWDYpfkaOwp6jFuZCqumErzOGCZAiolakZC0DmysofDlPTMk4IATnMRqInB4GfQJAZDZD

# ------------------------------------------------------------------------------
# ADMIN & DEBUG
# ------------------------------------------------------------------------------
# Active les outils d'administration (routes /api/admin/*)
# En production, mettre à "false" si non nécessaire
ADMIN_TOOLS_ENABLED=true

# Niveau de log (debug, info, warn, error)
LOG_LEVEL=info

# ------------------------------------------------------------------------------
# SÉCURITÉ
# ------------------------------------------------------------------------------
# Clé de chiffrement pour les tokens d'intégration (Shopify/Stripe Connect)
# Doit être une chaîne de 32 caractères minimum
ENCRYPTION_KEY=votre-cle-de-chiffrement-32-caracteres-minimum

# ------------------------------------------------------------------------------
# NOTES & CHECKLIST
# ------------------------------------------------------------------------------
#
# ✅ Avant de déployer en production, vérifiez que :
#
# 1. Toutes les variables marquées ⚠️ sont bien définies
# 2. Les clés Stripe sont en mode LIVE (sk_live_xxx / pk_live_xxx)
# 3. Le STRIPE_WEBHOOK_SECRET correspond bien au webhook de production
# 4. NEXT_PUBLIC_BASE_URL pointe vers votre domaine de production
# 5. ADMIN_TOOLS_ENABLED est à "false" si non utilisé
# 6. CRON_SECRET est unique et sécurisé
# 7. ENCRYPTION_KEY est long et aléatoire
# 8. Les DNS sont configurés pour RESEND (SPF, DKIM, DMARC)
# 9. reCAPTCHA est configuré pour votre domaine de prod
# 10. Les webhooks Stripe sont configurés et testés
#
# ==============================================================================
